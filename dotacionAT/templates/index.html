{% extends 'layouts/base.html' %}

{% block content %}

<br>
<br>
<br>

<div class="container mt-4">
  <h2 class="mb-4">ðŸ‘‹ Bienvenido, {{ request.user.first_name }} a su  Almacen de Dotacion Atiempo SAS</h2>
  
  <div class="row">
    <!-- Card 1 -->
    <!-- <div class="col-md-3">
      <div class="card text-white bg-primary shadow">
        <div class="card-body">
          <h5 class="card-title">Usuarios Activos</h5>
          <p class="card-text display-6">{{ usuarios_activos }}</p>
        </div>
      </div>
    </div> -->
    
    <!-- Card 2 -->
    <!-- <div class="col-md-3">
      <div class="card text-white bg-success shadow">
        <div class="card-body">
          <h5 class="card-title">Entregas del mes</h5>
          <p class="card-text display-6">{{ entregas_mes }}</p>
        </div>
      </div>
    </div> -->

    <!-- Card 3 -->
    <!-- <div class="col-md-3">
      <div class="card text-white bg-warning shadow">
        <div class="card-body">
          <h5 class="card-title">Faltantes</h5>
          <p class="card-text display-6">{{ faltantes_pendientes }}</p>
        </div>
      </div>
    </div> -->
    
    <!-- Card 4 -->
    <!-- <div class="col-md-3">
      <div class="card text-white bg-dark shadow">
        <div class="card-body">
          <h5 class="card-title">Empleados</h5>
          <p class="card-text display-6">{{ empleados_registrados }}</p>
        </div>
      </div>
    </div> -->
  </div>

  <!-- SecciÃ³n accesos rÃ¡pidos -->
  <div class="mt-4">
    <h4>ðŸš€ Accesos rÃ¡pidos</h4>
    <a href="{% url 'cargar_empleados' %}" class="btn btn-outline-primary me-2">Cargar empleados</a>
    <a href="{% url 'inventario_bodega_list' %}" class="btn btn-outline-success me-2">Inventario</a>
    {% if request.user.rol == "admin" %}
      <a href="{% url 'usuario' %}" class="btn btn-outline-danger">Gestionar usuarios</a>
    {% endif %}
  </div>
</div>


<!-- Tabla productos con bajo stock -->
<div class="card shadow">
  <div class="card-header bg-primary text-white">
    <h4 class="mb-0">ðŸ“Š Productos con stock bajo</h4>
  </div>
  <div class="card-body">
    {% if productos_bajos %}
      <table class="table table-striped table-hover text-center">
        <thead class="thead-dark">
          <tr>
            <th>Producto</th>
            <th>Bodega</th>
            <th>Stock actual</th>
            <th>Stock mÃ­nimo</th>
          </tr>
        </thead>
        <tbody>
          {% for p in productos_bajos %}
          <tr class="table-warning">
            <td>{{ p.producto.nombre }}</td>
            <td>{{ p.bodega.nombre }}</td>
            <td>{{ p.stock }}</td>
            <td>{{ p.stock_minimo }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-muted">âœ… No hay productos en stock bajo.</p>
    {% endif %}
  </div>
</div>

{% endblock %}